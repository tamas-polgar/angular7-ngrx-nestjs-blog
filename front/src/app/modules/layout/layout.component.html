<nz-layout style="height: 100vh">
  <nz-header
    style="color: white; padding:0; display: flex; align-items: center; justify-content: space-between;"
  >
    <div>
      <i
        nz-icon
        class="trigger"
        [type]="isCollapsed ? 'menu-unfold' : 'menu-fold'"
        (click)="toggleSideBar()"
      ></i>
      <span class="brand" [routerLink]="['/']">NestJS Blog</span>
    </div>

    <div
      class="user-panel"
      nz-popover
      nzTrigger="click"
      [nzContent]="userPanelPopOverTemplate"
      *ngIf="(isLoggedIn$ | async); else registerTemplate"
    >
      <p style="line-height: initial; padding-right: 1rem;">
        <span class="user-panel-name">Name</span>
        <span class="user-panel-email">m@m.com</span>
      </p>
      <nz-badge nzDot>
        <nz-avatar nzIcon="user" nzShape="square"></nz-avatar>
      </nz-badge>
      <ng-template #userPanelPopOverTemplate>
        <div style="padding: 1rem 0">
          <a [routerLink]="['/my-account']">
            <i nz-icon nzType="user"></i>
            &nbsp; My account
          </a>
          <nz-divider></nz-divider>
          <a [routerLink]="['/auth/logout']">
            <i nz-icon nzType="logout"></i>
            &nbsp; Log out
          </a>
        </div>
      </ng-template>
    </div>
    <ng-template #registerTemplate>
      <div style="line-height: 64px; padding:0 1rem; cursor: pointer;" [routerLink]="['/auth']">
        <!-- * if not logged in -->
        <span>My account</span>
      </div>
    </ng-template>
  </nz-header>

  <!-- * side list -->
  <nz-layout>
    <nz-sider nzCollapsible [(nzCollapsed)]="isCollapsed" [nzTrigger]="null" nzTheme="light">
      <ul
        nz-menu
        nzMode="inline"
        [nzInlineCollapsed]="isCollapsed"
        style="height: 100%; border: 0; overflow-y: auto; overflow-x: hidden"
      >
        <li nz-menu-item>
          <span>
            <i nz-icon nzType="font-colors"></i>
            <span class="nav-text">All articles</span>
          </span>
        </li>

        <li nz-submenu>
          <span title>
            <i nz-icon nzType="book"></i>
            <span class="nav-text">Categories</span>
          </span>
          <ul *ngIf="(categories$ | async)?.length; else noCategoryTemplate">
            <li nz-menu-item *ngFor="let item of (categories$ | async)">
              {{ item?.title }}
            </li>
          </ul>
          <ng-template #noCategoryTemplate>
            <ul>
              <li nz-menu-item>
                No category available yet
              </li>
            </ul>
          </ng-template>
        </li>

        <li nz-submenu>
          <span title>
            <i nz-icon nzType="team"></i>
            <span class="nav-text">Authors</span>
          </span>
          <ul>
            <li nz-menu-item>Tom</li>
            <li nz-menu-item>Bill</li>
            <li nz-menu-item>Alex</li>
          </ul>
        </li>
      </ul>
    </nz-sider>

    <nz-content class="content" id="content">
      <nz-back-top nzTarget="nz-content"></nz-back-top>

      <router-outlet></router-outlet>

      <nz-footer>
        <span (click)="goToLinkedIn()"> @ Mustapha AOUAS </span>
      </nz-footer>
    </nz-content>
  </nz-layout>
</nz-layout>
